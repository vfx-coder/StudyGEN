<!DOCTYPE html>
<html>
<head>
    <title>StudySync - Smart Planner</title>
    <style>
        body{
            font-family: Arial;
            background:#f4f6f9;
            display:flex;
            justify-content:center;
            padding:30px;
        }

        .box{
            background:white;
            padding:20px;
            width:450px;
            border-radius:12px;
            box-shadow:0 0 12px rgba(0,0,0,0.12);
        }

        h2{
            text-align:center;
            margin-bottom:15px;
        }

        input, select, button{
            width:100%;
            padding:8px;
            margin:6px 0;
        }

        button{
            background:#4a6cf7;
            color:white;
            border:none;
            border-radius:6px;
            cursor:pointer;
        }

        button:hover{
            background:#3655d6;
        }

        #output{
            margin-top:15px;
        }

        .card{
            background:#f9fbff;
            padding:10px;
            border-radius:8px;
            margin-bottom:10px;
            border-left:5px solid #4a6cf7;
        }

        .high{ color:red; font-weight:bold; }
        .medium{ color:orange; font-weight:bold; }
        .low{ color:green; font-weight:bold; }

        .progress{
            background:#ddd;
            border-radius:5px;
            overflow:hidden;
            height:10px;
            margin-top:5px;
        }

        .bar{
            height:10px;
            background:#4a6cf7;
        }

        #subjectList{
            background:#f8f8f8;
            padding:8px;
            border-radius:6px;
            font-size:14px;
            margin-top:8px;
        }
    </style>
</head>
<body>

<div class="box">

    <h2>StudySync</h2>

    <label>Mode</label>
    <select id="mode" onchange="toggleDaysField()">
        <option value="daily">Daily Based</option>
        <option value="exam">Exam Based</option>
    </select>

    <label>College Start Hour</label>
    <input type="number" id="start">

    <label>College End Hour</label>
    <input type="number" id="end">

    <label>Chill Time (hrs)</label>
    <input type="number" id="chill">

    <label>Sleep Time (hrs)</label>
    <input type="number" id="sleep">

    <hr>

    <h3>Add Subject</h3>

    <label>Subject Name</label>
    <input type="text" id="subject">

    <label>Difficulty (1-5)</label>
    <input type="number" id="difficulty">

    <label>Completion %</label>
    <input type="number" id="completion">

    <div id="daysContainer">
        <label>Days Left (Exam mode)</label>
        <input type="number" id="days">
    </div>

    <button onclick="addSubject()">Add Subject</button>

    <div id="subjectList"><b>Added Subjects:</b><br>None</div>

    <button onclick="generatePlan()">Generate Plan</button>

    <div id="output"></div>

</div>

<script>

let subjects = [];

// ---------- SHOW/HIDE DAYS ----------
function toggleDaysField(){
    let mode = document.getElementById("mode").value;
    document.getElementById("daysContainer").style.display =
        (mode==="exam") ? "block" : "none";
}

// ---------- ADD SUBJECT ----------
function addSubject(){

    let mode = document.getElementById("mode").value;
    let name = document.getElementById("subject").value;
    let diff = Number(document.getElementById("difficulty").value);
    let comp = Number(document.getElementById("completion").value);
    let days = Number(document.getElementById("days").value);

    if(name==="") return alert("Enter subject name");

    subjects.push({
        name:name,
        difficulty:diff,
        completion:comp,
        daysLeft:(mode==="exam")?days:0
    });

    updateSubjectList();

    document.getElementById("subject").value="";
    document.getElementById("difficulty").value="";
    document.getElementById("completion").value="";
    document.getElementById("days").value="";
}

// ---------- SUBJECT LIST ----------
function updateSubjectList(){

    let txt="<b>Added Subjects:</b><br>";
    if(subjects.length===0) txt+="None";

    subjects.forEach(s=>{
        txt+="â€¢ "+s.name+"<br>";
    });

    document.getElementById("subjectList").innerHTML=txt;
}

// ---------- PRIORITY LABEL ----------
function getPriorityLabel(p){
    if(p>=15) return "<span class='high'>HIGH</span>";
    if(p>=10) return "<span class='medium'>MEDIUM</span>";
    return "<span class='low'>LOW</span>";
}

// ---------- GENERATE PLAN ----------
function generatePlan(){

    if(subjects.length===0) return alert("Add subjects first!");

    let mode=document.getElementById("mode").value;

    let start=Number(document.getElementById("start").value);
    let end=Number(document.getElementById("end").value);
    let chill=Number(document.getElementById("chill").value);
    let sleep=Number(document.getElementById("sleep").value);

    let college=end-start;
    if(college<0) college+=24;

    let studyHours=24-college-chill-sleep;
    if(studyHours<0) studyHours=0;

    subjects.forEach(s=>{
        if(mode==="daily"){
            s.priority=s.difficulty*2+(100-s.completion)/10;
        }else{
            let urgency=Math.max(0,10-s.daysLeft);
            s.priority=s.difficulty*2+urgency+(100-s.completion)/10;
        }
    });

    subjects.sort((a,b)=>b.priority-a.priority);

    let out="<h3>Auto Study Hours: "+studyHours+" hrs</h3>";

    out+="<h3>Study Plan</h3>";

    let remaining=studyHours;

    subjects.forEach(s=>{

        let alloc=(remaining>0)?Math.min(2,remaining):0;
        remaining-=alloc;

        out += `
        <div class="card">
            <b>${s.name}</b> (${getPriorityLabel(s.priority)})<br>
            Priority Score: ${s.priority}<br>
            Suggested Time: ${alloc} hrs
            <div class="progress">
                <div class="bar" style="width:${s.completion}%"></div>
            </div>
            Completion: ${s.completion}%
        </div>`;
    });

    document.getElementById("output").innerHTML=out;
}

toggleDaysField();

</script>

</body>
</html>
